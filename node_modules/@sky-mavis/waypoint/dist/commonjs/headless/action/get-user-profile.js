'use strict';

var headless_error_server = require('../error/server.js');
var headless_action_helpers_request_abortKey = require('./helpers/request/abort-key.js');
var headless_action_helpers_request_request = require('./helpers/request/request.js');
require('../proto/rpc.js');
require('../../file-D9-_A4DE.js');
require('../../enum-CbdizYms.js');
require('../error/client.js');
require('../utils/token.js');
require('../../index-Pma4qYcb.js');
require('./helpers/request/abort-controller.js');
require('./helpers/request/configurations.js');

const getUserProfile = async params => {
  const {
    httpUrl,
    waypointToken
  } = params;
  const {
    data,
    error
  } = await headless_action_helpers_request_request.request(`get ${httpUrl}/v1/public/profiles/me`, {
    headers: {
      authorization: waypointToken
    },
    key: headless_action_helpers_request_abortKey.AbortKey.getUserProfile
  });
  if (data) {
    return data.data;
  }
  throw new headless_error_server.ServerError({
    code: error.code,
    message: error.errorMessage
  });
};

exports.getUserProfile = getUserProfile;
